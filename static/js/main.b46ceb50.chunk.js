(this["webpackJsonpaerolab-challenge-2021"]=this["webpackJsonpaerolab-challenge-2021"]||[]).push([[0],{20:function(e,t,c){},29:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){"use strict";c.r(t);var s,n=c(1),r=c.n(n),a=c(21),i=c.n(a),o=(c(29),c.p+"static/media/logo.0a8fb170.svg"),u=c.p+"static/media/coin.b8bc711d.svg",j=c(8),l=c(9),d=c(4);!function(e){e.BUY="[BUY PRODUCT]",e.INCREASE="[INCREASE BALANCE]"}(s||(s={}));var b=function(e,t){switch(t.type){case s.BUY:var c=e.redeemProducts.find((function(e){return e._id===t.payload._id})),n=Object(d.a)(Object(d.a)({},e),{},{userPoints:e.userPoints-t.payload.cost});return c?Object(d.a)(Object(d.a)({},n),{},{redeemProducts:Object(l.a)(e.redeemProducts.map((function(e){return e._id===c._id?Object(d.a)(Object(d.a)({},e),{},{quantity:e.quantity+1}):e})))}):Object(d.a)(Object(d.a)({},n),{},{redeemProducts:[].concat(Object(l.a)(e.redeemProducts),[Object(d.a)(Object(d.a)({},t.payload),{},{quantity:1})])});case s.INCREASE:return Object(d.a)(Object(d.a)({},e),{},{userPoints:e.userPoints+2500});default:return e}},m=c(0),O=Object(n.createContext)({}),p={redeemProducts:JSON.parse(localStorage.getItem("redeemProducts"))||[],userPoints:JSON.parse(localStorage.getItem("userPoints"))||6500},x=function(e){var t=e.children,c=Object(n.useReducer)(b,p),s=Object(j.a)(c,2),r=s[0],a=s[1],i={productsState:r,dispatch:a};return Object(n.useEffect)((function(){localStorage.setItem("userPoints",r.userPoints.toString()),localStorage.setItem("redeemProducts",JSON.stringify(r.redeemProducts))}),[r]),Object(m.jsx)(O.Provider,{value:i,children:t})},h=c(10),f=function(){var e=Object(n.useContext)(O),t=e.productsState,c=e.dispatch;return Object(m.jsxs)("nav",{className:"navbar",children:[Object(m.jsx)("img",{src:o,className:"navbar__logo",alt:"aerolab-logo"}),Object(m.jsxs)("div",{className:"navbar__userinfo",children:[Object(m.jsx)(h.b,{className:"navbar__userinfo-btn",to:"/profile",children:Object(m.jsx)("h3",{className:"navbar__username",children:"John Kite"})}),Object(m.jsxs)("button",{onClick:function(){setTimeout((function(){return c({type:s.INCREASE})}),1e3)},className:"navbar__user",children:[Object(m.jsx)("span",{className:"navbar__money",children:null===t||void 0===t?void 0:t.userPoints}),Object(m.jsx)("img",{className:"navbar__coin",src:u,alt:"coin"})]})]})]})},_=(c(36),function(){return Object(m.jsxs)("div",{className:"error404",children:[Object(m.jsx)("h1",{className:"error404__title",children:"Error 404"}),Object(m.jsx)("h3",{className:"error404__subtitle",children:"The resource you were looking for was not found"}),Object(m.jsx)(h.b,{className:"error404__btn",to:"/profile",children:"Back to Profile"})]})}),g=(c(37),function(){return Object(m.jsx)("main",{className:"hero",children:Object(m.jsx)("h2",{className:"hero__title",children:"Electronics"})})}),N=function(e,t){var c=Object(n.useState)({curIndex:0,nxtIndex:t,pageNumber:1}),s=Object(j.a)(c,2),r=s[0],a=s[1],i=Object(n.useState)(e),o=Object(j.a)(i,2),u=o[0],l=o[1],d=r.curIndex,b=r.nxtIndex,m=r.pageNumber,O=Math.ceil(e.length/t),p=m*t>e.length?e.length:m*t;return Object(n.useEffect)((function(){var t=e.slice(d,b);l(t)}),[e,m,d,b,t]),{filtered:u,amountOfElements:p,pageNumber:m,goNextPage:function(){d+t<e.length&&a({curIndex:d+t,nxtIndex:b+t,pageNumber:m+1})},goPrevPage:function(){d>0&&a({curIndex:d-t,nxtIndex:b-t,pageNumber:m-1})},amountOfPages:O,resetPagination:function(){a({curIndex:0,nxtIndex:t,pageNumber:1})}}},v=c(18),P=c.n(v),y=c(24),I=function(){var e=Object(y.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://coding-challenge-api.aerolab.co/products",{method:"GET",headers:{Authorization:" Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTU2NzA0ODgzOTQ5MDAwMjExZjNiMjIiLCJpYXQiOjE2MzMwNTQ3OTJ9.hTL6w62XaxJGJksvZo1yUnoa7ekSwpvl0CMjAn9p9Y0")}});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=c.p+"static/media/coin.b8bc711d.svg",S=(c(20),c.p+"static/media/buy-white.c0ee23a5.svg"),C=c.p+"static/media/buy-blue.c5c4f01c.svg",E=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("img",{className:"product-item__buy-icon--white product-item__buy-icon",src:S,alt:"buy-white-icon"}),Object(m.jsx)("img",{className:"product-item__buy-icon--blue product-item__buy-icon",src:C,alt:"buy-blue-icon"})]})},k=(c(39),function(){return Object(m.jsxs)("div",{className:"spinner",children:[Object(m.jsx)("div",{className:"rect1"}),Object(m.jsx)("div",{className:"rect2"}),Object(m.jsx)("div",{className:"rect3"}),Object(m.jsx)("div",{className:"rect4"})]})}),J=function(e){var t=e.product,c=Object(n.useContext)(O),r=c.productsState,a=c.dispatch,i=Object(n.useState)(!1),o=Object(j.a)(i,2),u=o[0],l=o[1],b=t.name,p=t.category,x=t.cost,h=t.img,f=r.userPoints-x,_=f>=0;return Object(m.jsxs)("div",{className:"product-item",children:[Object(m.jsxs)("div",{className:"product-item__info",children:[Object(m.jsx)("img",{src:h.url,alt:b}),Object(m.jsxs)("div",{className:"product-item__text",children:[Object(m.jsx)("span",{children:p}),Object(m.jsx)("h4",{children:b})]})]}),_?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(E,{}),Object(m.jsxs)("div",{className:"product-item__redeem-info",children:[Object(m.jsxs)("div",{className:"product-item__redeem-cost",children:[Object(m.jsx)("span",{children:x}),Object(m.jsx)("img",{src:w,alt:"coin-icon"})]}),Object(m.jsx)("button",{onClick:function(){l(!0),setTimeout((function(){a({type:s.BUY,payload:Object(d.a)(Object(d.a)({},t),{},{date:(new Date).toDateString()})}),l(!1)}),1e3)},className:"product-item__redeem-btn",children:u?Object(m.jsx)(k,{}):"Redeem Now"})]})]}):Object(m.jsxs)("div",{className:"product-item__needed-points",children:[Object(m.jsxs)("span",{className:"product-item__needed-points__label",children:["You need ",Math.abs(f)]}),Object(m.jsx)("img",{src:w,alt:"coin-icon"})]})]})},M=(c(40),function(e){var t=e.filtered;return Object(m.jsx)("div",{className:"products__list",children:null===t||void 0===t?void 0:t.map((function(e){return Object(m.jsx)(J,{product:e},e._id)}))})}),R=c.p+"static/media/arrow-left.e6eb9be1.svg",A=c.p+"static/media/arrow-right.3306c112.svg",T=(c(41),function(){var e=Object(n.useRef)(!0),t=Object(n.useState)([]),c=Object(j.a)(t,2),s=c[0],r=c[1],a=Object(n.useState)([]),i=Object(j.a)(a,2),o=i[0],u=i[1],d=N(s,16),b=d.filtered,O=d.amountOfElements,p=d.pageNumber,x=d.goNextPage,h=d.goPrevPage;Object(n.useEffect)((function(){return I().then((function(t){e.current&&(r(t),u(t))})),function(){e.current=!1}}),[s]);return Object(m.jsxs)("div",{className:"products",children:[Object(m.jsxs)("div",{className:"products__handlers",children:[Object(m.jsxs)("div",{className:"products__sort",children:[Object(m.jsxs)("span",{className:"products__amount",children:[O," of ",null===s||void 0===s?void 0:s.length," products"]}),Object(m.jsxs)("div",{className:"products__sort-buttons",children:[Object(m.jsx)("span",{className:"products__sort-buttons-label",children:"Sort by: "}),Object(m.jsxs)("div",{className:"products__sort-buttons-container",children:[Object(m.jsx)("button",{onClick:function(){o.length>0&&r(Object(l.a)(o))},className:"products__most-recent btn",children:"Most Recent"}),Object(m.jsx)("button",{onClick:function(){r(Object(l.a)(function(e){return Object(l.a)(e).sort((function(e,t){return e.cost-t.cost}))}(s)))},className:"products__lowest-price btn",children:"Lowest Price"}),Object(m.jsx)("button",{onClick:function(){r(Object(l.a)(function(e){return Object(l.a)(e).sort((function(e,t){return t.cost-e.cost}))}(s)))},className:"products__highest-price btn",children:"Highest Price"})]})]})]}),Object(m.jsxs)("div",{className:"products__pagination-controls",children:[p>1&&Object(m.jsx)("button",{onClick:h,className:"products__left-arrow",children:Object(m.jsx)("img",{src:R,alt:"left-arrow-icoin"})}),O<s.length&&Object(m.jsx)("button",{onClick:x,className:"products__right-arrow",children:Object(m.jsx)("img",{src:A,alt:"right-arrow-icoin"})})]})]}),Object(m.jsx)(M,{filtered:b}),Object(m.jsxs)("footer",{className:"footer",children:[O," of ",null===s||void 0===s?void 0:s.length," products"]})]})}),B=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(g,{}),Object(m.jsx)(T,{})]})},U=function(e){var t=e.redeemProduct,c=t.name,s=t.category,n=t.img,r=t.date,a=t.quantity;return Object(m.jsx)("div",{className:"product-item",children:Object(m.jsxs)("div",{className:"product-item__info",children:[Object(m.jsx)("img",{src:n.url,alt:c}),Object(m.jsxs)("div",{className:"product-item__text",children:[Object(m.jsx)("span",{children:s}),Object(m.jsx)("h4",{children:c}),Object(m.jsxs)("p",{children:["Date : ",r]}),Object(m.jsxs)("p",{children:["Quantity : ",a]})]})]})})},Y=(c(42),c.p+"static/media/arrow-left.e6eb9be1.svg"),D=c.p+"static/media/arrow-right.3306c112.svg",z=function(){var e=Object(n.useContext)(O).productsState,t=N(e.redeemProducts,12),c=t.filtered,s=t.goPrevPage,r=t.goNextPage,a=t.amountOfElements;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"profile-page__controls",children:[Object(m.jsx)("button",{onClick:s,className:"profile-page__button",children:Object(m.jsx)("img",{src:Y,alt:"previous-button"})}),Object(m.jsxs)("span",{children:[a," of ",e.redeemProducts.length," Products"]}),Object(m.jsx)("button",{onClick:r,className:"profile-page__button",children:Object(m.jsx)("img",{src:D,alt:"next-button"})})]}),Object(m.jsx)("div",{className:"profile-page__list",children:c.map((function(e){return Object(m.jsx)(U,{redeemProduct:e},e._id)}))})]})},Q=(c(43),function(){return Object(m.jsxs)("div",{className:"profile-page",children:[Object(m.jsxs)("div",{className:"profile-page__bar",children:[Object(m.jsx)(h.b,{className:"profile-page__back-button",to:"/",children:"Back"}),Object(m.jsx)("h3",{className:"profile-page__label",children:"Redeem Products"})]}),Object(m.jsx)(z,{})]})}),q=c(2),F=function(){return Object(m.jsxs)(h.a,{children:[Object(m.jsx)(f,{}),Object(m.jsxs)(q.c,{children:[Object(m.jsx)(q.a,{exact:!0,path:"/profile",component:Q}),Object(m.jsx)(q.a,{path:"/",component:B}),Object(m.jsx)(q.a,{component:_})]})]})};var L=function(){return Object(m.jsx)(x,{children:Object(m.jsx)(F,{})})};c(44);i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(L,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.b46ceb50.chunk.js.map
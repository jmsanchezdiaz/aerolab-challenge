(this["webpackJsonpaerolab-challenge-2021"]=this["webpackJsonpaerolab-challenge-2021"]||[]).push([[0],{20:function(e,t,c){},29:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){"use strict";c.r(t);var s,n=c(1),r=c.n(n),a=c(21),i=c.n(a),o=c(10),l=c(2),u=(c(29),c.p+"static/media/logo.0a8fb170.svg"),j=c.p+"static/media/coin.b8bc711d.svg",d=c(8),b=c(9),m=c(4);!function(e){e.BUY="[BUY PRODUCT]",e.INCREASE="[INCREASE BALANCE]"}(s||(s={}));var O=function(e,t){switch(t.type){case s.BUY:var c=e.redeemProducts.find((function(e){return e._id===t.payload._id})),n=Object(m.a)(Object(m.a)({},e),{},{userPoints:e.userPoints-t.payload.cost});return c?Object(m.a)(Object(m.a)({},n),{},{redeemProducts:Object(b.a)(e.redeemProducts.map((function(e){return e._id===c._id?Object(m.a)(Object(m.a)({},e),{},{quantity:e.quantity+1}):e})))}):Object(m.a)(Object(m.a)({},n),{},{redeemProducts:[].concat(Object(b.a)(e.redeemProducts),[Object(m.a)(Object(m.a)({},t.payload),{},{quantity:1})])});case s.INCREASE:return Object(m.a)(Object(m.a)({},e),{},{userPoints:e.userPoints+2500});default:return e}},p=c(0),x=Object(n.createContext)({}),h={redeemProducts:JSON.parse(localStorage.getItem("redeemProducts"))||[],userPoints:JSON.parse(localStorage.getItem("userPoints"))||6500},f=function(e){var t=e.children,c=Object(n.useReducer)(O,h),s=Object(d.a)(c,2),r=s[0],a=s[1],i={productsState:r,dispatch:a};return Object(n.useEffect)((function(){localStorage.setItem("userPoints",r.userPoints.toString()),localStorage.setItem("redeemProducts",JSON.stringify(r.redeemProducts))}),[r]),Object(p.jsx)(x.Provider,{value:i,children:t})},g=function(){var e=Object(n.useContext)(x),t=e.productsState,c=e.dispatch;return Object(p.jsxs)("nav",{className:"navbar",children:[Object(p.jsx)("img",{src:u,className:"navbar__logo",alt:"aerolab-logo"}),Object(p.jsxs)("div",{className:"navbar__userinfo",children:[Object(p.jsx)(o.b,{className:"navbar__userinfo-btn",to:"/aerolabchallenge/profile",children:Object(p.jsx)("h3",{className:"navbar__username",children:"John Kite"})}),Object(p.jsxs)("button",{onClick:function(){setTimeout((function(){return c({type:s.INCREASE})}),1e3)},className:"navbar__user",children:[Object(p.jsx)("span",{className:"navbar__money",children:null===t||void 0===t?void 0:t.userPoints}),Object(p.jsx)("img",{className:"navbar__coin",src:j,alt:"coin"})]})]})]})},_=(c(36),function(){return Object(p.jsxs)("div",{className:"error404",children:[Object(p.jsx)("h1",{className:"error404__title",children:"Error 404"}),Object(p.jsx)("h3",{className:"error404__subtitle",children:"The resource you were looking for was not found"}),Object(p.jsx)(o.b,{className:"error404__btn",to:"/aerolabchallenge/profile",children:"Back to Profile"})]})}),N=(c(37),function(){return Object(p.jsx)("main",{className:"hero",children:Object(p.jsx)("h2",{className:"hero__title",children:"Electronics"})})}),v=function(e,t){var c=Object(n.useState)({curIndex:0,nxtIndex:t,pageNumber:1}),s=Object(d.a)(c,2),r=s[0],a=s[1],i=Object(n.useState)(e),o=Object(d.a)(i,2),l=o[0],u=o[1],j=r.curIndex,b=r.nxtIndex,m=r.pageNumber,O=Math.ceil(e.length/t),p=m*t>e.length?e.length:m*t;return Object(n.useEffect)((function(){var t=e.slice(j,b);u(t)}),[e,m,j,b,t]),{filtered:l,amountOfElements:p,pageNumber:m,goNextPage:function(){j+t<e.length&&a({curIndex:j+t,nxtIndex:b+t,pageNumber:m+1})},goPrevPage:function(){j>0&&a({curIndex:j-t,nxtIndex:b-t,pageNumber:m-1})},amountOfPages:O,resetPagination:function(){a({curIndex:0,nxtIndex:t,pageNumber:1})}}},P=c(18),y=c.n(P),I=c(24),w=function(){var e=Object(I.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://coding-challenge-api.aerolab.co/products",{method:"GET",headers:{Authorization:" Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTU2NzA0ODgzOTQ5MDAwMjExZjNiMjIiLCJpYXQiOjE2MzMwNTQ3OTJ9.hTL6w62XaxJGJksvZo1yUnoa7ekSwpvl0CMjAn9p9Y0")}});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=c.p+"static/media/coin.b8bc711d.svg",C=(c(20),c.p+"static/media/buy-white.c0ee23a5.svg"),E=c.p+"static/media/buy-blue.c5c4f01c.svg",k=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("img",{className:"product-item__buy-icon--white product-item__buy-icon",src:C,alt:"buy-white-icon"}),Object(p.jsx)("img",{className:"product-item__buy-icon--blue product-item__buy-icon",src:E,alt:"buy-blue-icon"})]})},J=(c(39),function(){return Object(p.jsxs)("div",{className:"spinner",children:[Object(p.jsx)("div",{className:"rect1"}),Object(p.jsx)("div",{className:"rect2"}),Object(p.jsx)("div",{className:"rect3"}),Object(p.jsx)("div",{className:"rect4"})]})}),M=function(e){var t=e.product,c=Object(n.useContext)(x),r=c.productsState,a=c.dispatch,i=Object(n.useState)(!1),o=Object(d.a)(i,2),l=o[0],u=o[1],j=t.name,b=t.category,O=t.cost,h=t.img,f=r.userPoints-O,g=f>=0;return Object(p.jsxs)("div",{className:"product-item",children:[Object(p.jsxs)("div",{className:"product-item__info",children:[Object(p.jsx)("img",{src:h.url,alt:j}),Object(p.jsxs)("div",{className:"product-item__text",children:[Object(p.jsx)("span",{children:b}),Object(p.jsx)("h4",{children:j})]})]}),g?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(k,{}),Object(p.jsxs)("div",{className:"product-item__redeem-info",children:[Object(p.jsxs)("div",{className:"product-item__redeem-cost",children:[Object(p.jsx)("span",{children:O}),Object(p.jsx)("img",{src:S,alt:"coin-icon"})]}),Object(p.jsx)("button",{onClick:function(){u(!0),setTimeout((function(){a({type:s.BUY,payload:Object(m.a)(Object(m.a)({},t),{},{date:(new Date).toDateString()})}),u(!1)}),1e3)},className:"product-item__redeem-btn",children:l?Object(p.jsx)(J,{}):"Redeem Now"})]})]}):Object(p.jsxs)("div",{className:"product-item__needed-points",children:[Object(p.jsxs)("span",{className:"product-item__needed-points__label",children:["You need ",Math.abs(f)]}),Object(p.jsx)("img",{src:S,alt:"coin-icon"})]})]})},R=(c(40),function(e){var t=e.filtered;return Object(p.jsx)("div",{className:"products__list",children:null===t||void 0===t?void 0:t.map((function(e){return Object(p.jsx)(M,{product:e},e._id)}))})}),A=c.p+"static/media/arrow-left.e6eb9be1.svg",T=c.p+"static/media/arrow-right.3306c112.svg",B=(c(41),function(){var e=Object(n.useRef)(!0),t=Object(n.useState)([]),c=Object(d.a)(t,2),s=c[0],r=c[1],a=Object(n.useState)([]),i=Object(d.a)(a,2),o=i[0],l=i[1],u=v(s,16),j=u.filtered,m=u.amountOfElements,O=u.pageNumber,x=u.goNextPage,h=u.goPrevPage;Object(n.useEffect)((function(){return w().then((function(t){e.current&&(r(t),l(t))})),function(){e.current=!1}}),[s]);return Object(p.jsxs)("div",{className:"products",children:[Object(p.jsxs)("div",{className:"products__handlers",children:[Object(p.jsxs)("div",{className:"products__sort",children:[Object(p.jsxs)("span",{className:"products__amount",children:[m," of ",null===s||void 0===s?void 0:s.length," products"]}),Object(p.jsxs)("div",{className:"products__sort-buttons",children:[Object(p.jsx)("span",{className:"products__sort-buttons-label",children:"Sort by: "}),Object(p.jsxs)("div",{className:"products__sort-buttons-container",children:[Object(p.jsx)("button",{onClick:function(){o.length>0&&r(Object(b.a)(o))},className:"products__most-recent btn",children:"Most Recent"}),Object(p.jsx)("button",{onClick:function(){r(Object(b.a)(function(e){return Object(b.a)(e).sort((function(e,t){return e.cost-t.cost}))}(s)))},className:"products__lowest-price btn",children:"Lowest Price"}),Object(p.jsx)("button",{onClick:function(){r(Object(b.a)(function(e){return Object(b.a)(e).sort((function(e,t){return t.cost-e.cost}))}(s)))},className:"products__highest-price btn",children:"Highest Price"})]})]})]}),Object(p.jsxs)("div",{className:"products__pagination-controls",children:[O>1&&Object(p.jsx)("button",{onClick:h,className:"products__left-arrow",children:Object(p.jsx)("img",{src:A,alt:"left-arrow-icoin"})}),m<s.length&&Object(p.jsx)("button",{onClick:x,className:"products__right-arrow",children:Object(p.jsx)("img",{src:T,alt:"right-arrow-icoin"})})]})]}),Object(p.jsx)(R,{filtered:j}),Object(p.jsxs)("footer",{className:"footer",children:[m," of ",null===s||void 0===s?void 0:s.length," products"]})]})}),U=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(N,{}),Object(p.jsx)(B,{})]})},Y=function(e){var t=e.redeemProduct,c=t.name,s=t.category,n=t.img,r=t.date,a=t.quantity;return Object(p.jsx)("div",{className:"product-item",children:Object(p.jsxs)("div",{className:"product-item__info",children:[Object(p.jsx)("img",{src:n.url,alt:c}),Object(p.jsxs)("div",{className:"product-item__text",children:[Object(p.jsx)("span",{children:s}),Object(p.jsx)("h4",{children:c}),Object(p.jsxs)("p",{children:["Date : ",r]}),Object(p.jsxs)("p",{children:["Quantity : ",a]})]})]})})},D=(c(42),c.p+"static/media/arrow-left.e6eb9be1.svg"),z=c.p+"static/media/arrow-right.3306c112.svg",F=function(){var e=Object(n.useContext)(x).productsState,t=v(e.redeemProducts,12),c=t.filtered,s=t.goPrevPage,r=t.goNextPage,a=t.amountOfElements;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"profile-page__controls",children:[Object(p.jsx)("button",{onClick:s,className:"profile-page__button",children:Object(p.jsx)("img",{src:D,alt:"previous-button"})}),Object(p.jsxs)("span",{children:[a," of ",e.redeemProducts.length," Products"]}),Object(p.jsx)("button",{onClick:r,className:"profile-page__button",children:Object(p.jsx)("img",{src:z,alt:"next-button"})})]}),Object(p.jsx)("div",{className:"profile-page__list",children:c.map((function(e){return Object(p.jsx)(Y,{redeemProduct:e},e._id)}))})]})},Q=(c(43),function(){return Object(p.jsxs)("div",{className:"profile-page",children:[Object(p.jsxs)("div",{className:"profile-page__bar",children:[Object(p.jsx)(o.b,{className:"profile-page__back-button",to:"/aerolabchallenge",children:"Back"}),Object(p.jsx)("h3",{className:"profile-page__label",children:"Redeem Products"})]}),Object(p.jsx)(F,{})]})}),q=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(g,{}),Object(p.jsxs)(l.c,{children:[Object(p.jsx)(l.a,{exact:!0,path:"/aerolabchallenge/profile",component:Q}),Object(p.jsx)(l.a,{exact:!0,path:"/aerolabchallenge/",component:U}),Object(p.jsx)(l.a,{component:_})]})]})},L=function(){return Object(p.jsx)(o.a,{children:Object(p.jsx)(l.a,{path:"/",component:q})})};var G=function(){return Object(p.jsx)(f,{children:Object(p.jsx)(L,{})})};c(44);i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(G,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.78692993.chunk.js.map
(this["webpackJsonpaerolab-challenge-2021"]=this["webpackJsonpaerolab-challenge-2021"]||[]).push([[0],[,,,,,,,,,,function(e,t,c){},,,,,,,function(e,t,c){},,function(e,t,c){},function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var s,n=c(1),r=c.n(n),a=c(11),i=c.n(a),o=c(5),l=(c(17),c.p+"static/media/logo.0a8fb170.svg"),u=c.p+"static/media/coin.b8bc711d.svg",j=c(2),d=c(4),b=c(3);!function(e){e.BUY="[BUY PRODUCT]",e.INCREASE="[INCREASE BALANCE]"}(s||(s={}));var m=function(e,t){switch(t.type){case s.BUY:var c=e.redeemProducts.find((function(e){return e._id===t.payload._id})),n=Object(b.a)(Object(b.a)({},e),{},{userPoints:e.userPoints-t.payload.cost});return c?Object(b.a)(Object(b.a)({},n),{},{redeemProducts:Object(d.a)(e.redeemProducts.map((function(e){return e._id===c._id?Object(b.a)(Object(b.a)({},e),{},{quantity:e.quantity+1}):e})))}):Object(b.a)(Object(b.a)({},n),{},{redeemProducts:[].concat(Object(d.a)(e.redeemProducts),[Object(b.a)(Object(b.a)({},t.payload),{},{quantity:1})])});case s.INCREASE:return Object(b.a)(Object(b.a)({},e),{},{userPoints:e.userPoints+2500});default:return e}},O=c(0),p=Object(n.createContext)({}),h={redeemProducts:JSON.parse(localStorage.getItem("redeemProducts"))||[],userPoints:JSON.parse(localStorage.getItem("userPoints"))||6500},x=function(e){var t=e.children,c=Object(n.useReducer)(m,h),s=Object(j.a)(c,2),r=s[0],a=s[1],i={productsState:r,dispatch:a};return Object(n.useEffect)((function(){localStorage.setItem("userPoints",r.userPoints.toString()),localStorage.setItem("redeemProducts",JSON.stringify(r.redeemProducts))}),[r]),Object(O.jsx)(p.Provider,{value:i,children:t})},f=function(){var e=Object(n.useContext)(p),t=e.productsState,c=e.dispatch;return Object(O.jsxs)("nav",{className:"navbar",children:[Object(O.jsx)("img",{src:l,className:"navbar__logo",alt:"aerolab-logo"}),Object(O.jsxs)("div",{className:"navbar__userinfo",children:[Object(O.jsx)(o.a,{to:"/aerolab-challenge/profile",children:Object(O.jsx)("h3",{className:"navbar__username",children:"John Kite"})}),Object(O.jsxs)("button",{onClick:function(){setTimeout((function(){return c({type:s.INCREASE})}),1e3)},className:"navbar__user",children:[Object(O.jsx)("span",{className:"navbar__money",children:null===t||void 0===t?void 0:t.userPoints}),Object(O.jsx)("img",{className:"navbar__coin",src:u,alt:"coin"})]})]})]})},g=(c(19),function(){return Object(O.jsxs)("div",{className:"error404",children:[Object(O.jsx)("h1",{className:"error404__title",children:"Error 404"}),Object(O.jsx)("h3",{className:"error404__subtitle",children:"The resource you were looking for was not found"}),Object(O.jsx)(o.a,{className:"error404__btn",to:"/aerolab-challenge/profile",children:"Back to Profile"})]})}),_=(c(20),function(){return Object(O.jsx)("main",{className:"hero",children:Object(O.jsx)("h2",{className:"hero__title",children:"Electronics"})})}),v=function(e,t){var c=Object(n.useState)({curIndex:0,nxtIndex:t,pageNumber:1}),s=Object(j.a)(c,2),r=s[0],a=s[1],i=Object(n.useState)(e),o=Object(j.a)(i,2),l=o[0],u=o[1],d=r.curIndex,b=r.nxtIndex,m=r.pageNumber,O=Math.ceil(e.length/t),p=m*t>e.length?e.length:m*t;return Object(n.useEffect)((function(){var t=e.slice(d,b);u(t)}),[e,m,d,b,t]),{filtered:l,amountOfElements:p,pageNumber:m,goNextPage:function(){d+t<e.length&&a({curIndex:d+t,nxtIndex:b+t,pageNumber:m+1})},goPrevPage:function(){d>0&&a({curIndex:d-t,nxtIndex:b-t,pageNumber:m-1})},amountOfPages:O,resetPagination:function(){a({curIndex:0,nxtIndex:t,pageNumber:1})}}},N=c(9),P=c.n(N),y=c(12),I=function(){var e=Object(y.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://coding-challenge-api.aerolab.co/products",{method:"GET",headers:{Authorization:" Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTU2NzA0ODgzOTQ5MDAwMjExZjNiMjIiLCJpYXQiOjE2MzMwNTQ3OTJ9.hTL6w62XaxJGJksvZo1yUnoa7ekSwpvl0CMjAn9p9Y0")}});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=c.p+"static/media/coin.b8bc711d.svg",S=(c(10),c.p+"static/media/buy-white.c0ee23a5.svg"),C=c.p+"static/media/buy-blue.c5c4f01c.svg",E=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{className:"product-item__buy-icon--white product-item__buy-icon",src:S,alt:"buy-white-icon"}),Object(O.jsx)("img",{className:"product-item__buy-icon--blue product-item__buy-icon",src:C,alt:"buy-blue-icon"})]})},k=(c(22),function(){return Object(O.jsxs)("div",{className:"spinner",children:[Object(O.jsx)("div",{className:"rect1"}),Object(O.jsx)("div",{className:"rect2"}),Object(O.jsx)("div",{className:"rect3"}),Object(O.jsx)("div",{className:"rect4"})]})}),J=function(e){var t=e.product,c=Object(n.useContext)(p),r=c.productsState,a=c.dispatch,i=Object(n.useState)(!1),o=Object(j.a)(i,2),l=o[0],u=o[1],d=t.name,m=t.category,h=t.cost,x=t.img,f=r.userPoints-h,g=f>=0;return Object(O.jsxs)("div",{className:"product-item",children:[Object(O.jsxs)("div",{className:"product-item__info",children:[Object(O.jsx)("img",{src:x.url,alt:d}),Object(O.jsxs)("div",{className:"product-item__text",children:[Object(O.jsx)("span",{children:m}),Object(O.jsx)("h4",{children:d})]})]}),g?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(E,{}),Object(O.jsxs)("div",{className:"product-item__redeem-info",children:[Object(O.jsxs)("div",{className:"product-item__redeem-cost",children:[Object(O.jsx)("span",{children:h}),Object(O.jsx)("img",{src:w,alt:"coin-icon"})]}),Object(O.jsx)("button",{onClick:function(){u(!0),setTimeout((function(){a({type:s.BUY,payload:Object(b.a)(Object(b.a)({},t),{},{date:(new Date).toDateString()})}),u(!1)}),1e3)},className:"product-item__redeem-btn",children:l?Object(O.jsx)(k,{}):"Redeem Now"})]})]}):Object(O.jsxs)("div",{className:"product-item__needed-points",children:[Object(O.jsxs)("span",{className:"product-item__needed-points__label",children:["You need ",Math.abs(f)]}),Object(O.jsx)("img",{src:w,alt:"coin-icon"})]})]})},M=(c(23),function(e){var t=e.filtered;return Object(O.jsx)("div",{className:"products__list",children:null===t||void 0===t?void 0:t.map((function(e){return Object(O.jsx)(J,{product:e},e._id)}))})}),R=c.p+"static/media/arrow-left.e6eb9be1.svg",A=c.p+"static/media/arrow-right.3306c112.svg",T=(c(24),function(){var e=Object(n.useRef)(!0),t=Object(n.useState)([]),c=Object(j.a)(t,2),s=c[0],r=c[1],a=Object(n.useState)([]),i=Object(j.a)(a,2),o=i[0],l=i[1],u=v(s,16),b=u.filtered,m=u.amountOfElements,p=u.pageNumber,h=u.goNextPage,x=u.goPrevPage;Object(n.useEffect)((function(){return I().then((function(t){e.current&&(r(t),l(t))})),function(){e.current=!1}}),[s]);return Object(O.jsxs)("div",{className:"products",children:[Object(O.jsxs)("div",{className:"products__handlers",children:[Object(O.jsxs)("div",{className:"products__sort",children:[Object(O.jsxs)("span",{className:"products__amount",children:[m," of ",null===s||void 0===s?void 0:s.length," products"]}),Object(O.jsxs)("div",{className:"products__sort-buttons",children:[Object(O.jsx)("span",{className:"products__sort-buttons-label",children:"Sort by: "}),Object(O.jsxs)("div",{className:"products__sort-buttons-container",children:[Object(O.jsx)("button",{onClick:function(){o.length>0&&r(Object(d.a)(o))},className:"products__most-recent btn",children:"Most Recent"}),Object(O.jsx)("button",{onClick:function(){r(Object(d.a)(function(e){return Object(d.a)(e).sort((function(e,t){return e.cost-t.cost}))}(s)))},className:"products__lowest-price btn",children:"Lowest Price"}),Object(O.jsx)("button",{onClick:function(){r(Object(d.a)(function(e){return Object(d.a)(e).sort((function(e,t){return t.cost-e.cost}))}(s)))},className:"products__highest-price btn",children:"Highest Price"})]})]})]}),Object(O.jsxs)("div",{className:"products__pagination-controls",children:[p>1&&Object(O.jsx)("button",{onClick:x,className:"products__left-arrow",children:Object(O.jsx)("img",{src:R,alt:"left-arrow-icoin"})}),m<s.length&&Object(O.jsx)("button",{onClick:h,className:"products__right-arrow",children:Object(O.jsx)("img",{src:A,alt:"right-arrow-icoin"})})]})]}),Object(O.jsx)(M,{filtered:b}),Object(O.jsxs)("footer",{className:"footer",children:[m," of ",null===s||void 0===s?void 0:s.length," products"]})]})}),B=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(_,{}),Object(O.jsx)(T,{})]})},U=function(e){var t=e.redeemProduct,c=t.name,s=t.category,n=t.img,r=t.date,a=t.quantity;return Object(O.jsx)("div",{className:"product-item",children:Object(O.jsxs)("div",{className:"product-item__info",children:[Object(O.jsx)("img",{src:n.url,alt:c}),Object(O.jsxs)("div",{className:"product-item__text",children:[Object(O.jsx)("span",{children:s}),Object(O.jsx)("h4",{children:c}),Object(O.jsxs)("p",{children:["Date : ",r]}),Object(O.jsxs)("p",{children:["Quantity : ",a]})]})]})})},Y=(c(25),c.p+"static/media/arrow-left.e6eb9be1.svg"),D=c.p+"static/media/arrow-right.3306c112.svg",z=function(){var e=Object(n.useContext)(p).productsState,t=v(e.redeemProducts,12),c=t.filtered,s=t.goPrevPage,r=t.goNextPage,a=t.amountOfElements;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"profile-page__controls",children:[Object(O.jsx)("button",{onClick:s,className:"profile-page__button",children:Object(O.jsx)("img",{src:Y,alt:"previous-button"})}),Object(O.jsxs)("span",{children:[a," of ",e.redeemProducts.length," Products"]}),Object(O.jsx)("button",{onClick:r,className:"profile-page__button",children:Object(O.jsx)("img",{src:D,alt:"next-button"})})]}),Object(O.jsx)("div",{className:"profile-page__list",children:c.map((function(e){return Object(O.jsx)(U,{redeemProduct:e},e._id)}))})]})},Q=(c(26),function(){return Object(O.jsxs)("div",{className:"profile-page",children:[Object(O.jsxs)("div",{className:"profile-page__bar",children:[Object(O.jsx)(o.a,{className:"profile-page__back-button",to:"/aerolab-challenge",children:"Back"}),Object(O.jsx)("h3",{className:"profile-page__label",children:"Redeem Products"})]}),Object(O.jsx)(z,{})]})}),q=function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(f,{}),Object(O.jsxs)(o.c,{children:[Object(O.jsx)(o.b,{path:"/aerolab-challenge",component:B}),Object(O.jsx)(o.b,{path:"/aerolab-challenge/profile",component:Q}),Object(O.jsx)(o.b,{component:g})]})]})};var F=function(){return Object(O.jsx)(x,{children:Object(O.jsx)(q,{})})};c(27);i.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(F,{})}),document.getElementById("root"))}],[[28,1,2]]]);
//# sourceMappingURL=main.3c16905d.chunk.js.map
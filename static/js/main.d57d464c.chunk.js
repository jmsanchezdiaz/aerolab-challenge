(this["webpackJsonpaerolab-challenge-2021"]=this["webpackJsonpaerolab-challenge-2021"]||[]).push([[0],{20:function(e,t,c){},29:function(e,t,c){},36:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){"use strict";c.r(t);var n,s=c(1),r=c.n(s),a=c(21),i=c.n(a),o=c(11),u=c(2),d=(c(29),c.p+"static/media/logo.0a8fb170.svg"),j=c.p+"static/media/coin.b8bc711d.svg",l=c(8),b=c(9),m=c(4);!function(e){e.BUY="[BUY PRODUCT]",e.INCREASE="[INCREASE BALANCE]"}(n||(n={}));var O=function(e,t){switch(t.type){case n.BUY:var c=e.redeemProducts.find((function(e){return e._id===t.payload._id})),s=Object(m.a)(Object(m.a)({},e),{},{userPoints:e.userPoints-t.payload.cost});return c?Object(m.a)(Object(m.a)({},s),{},{redeemProducts:Object(b.a)(e.redeemProducts.map((function(e){return e._id===c._id?Object(m.a)(Object(m.a)({},e),{},{quantity:e.quantity+1}):e})))}):Object(m.a)(Object(m.a)({},s),{},{redeemProducts:[].concat(Object(b.a)(e.redeemProducts),[Object(m.a)(Object(m.a)({},t.payload),{},{quantity:1})])});case n.INCREASE:return Object(m.a)(Object(m.a)({},e),{},{userPoints:e.userPoints+2500});default:return e}},p=c(0),x=Object(s.createContext)({}),h={redeemProducts:JSON.parse(localStorage.getItem("redeemProducts"))||[],userPoints:JSON.parse(localStorage.getItem("userPoints"))||6500},f=function(e){var t=e.children,c=Object(s.useReducer)(O,h),n=Object(l.a)(c,2),r=n[0],a=n[1],i={productsState:r,dispatch:a};return Object(s.useEffect)((function(){localStorage.setItem("userPoints",r.userPoints.toString()),localStorage.setItem("redeemProducts",JSON.stringify(r.redeemProducts))}),[r]),Object(p.jsx)(x.Provider,{value:i,children:t})},g=function(){var e=Object(s.useContext)(x),t=e.productsState,c=e.dispatch;return Object(p.jsxs)("nav",{className:"navbar",children:[Object(p.jsx)("img",{src:d,className:"navbar__logo",alt:"aerolab-logo"}),Object(p.jsxs)("div",{className:"navbar__userinfo",children:[Object(p.jsx)(o.b,{className:"navbar__userinfo-btn",to:"/profile",children:Object(p.jsx)("h3",{className:"navbar__username",children:"John Kite"})}),Object(p.jsxs)("button",{onClick:function(){setTimeout((function(){return c({type:n.INCREASE})}),1e3)},className:"navbar__user",children:[Object(p.jsx)("span",{className:"navbar__money",children:null===t||void 0===t?void 0:t.userPoints}),Object(p.jsx)("img",{className:"navbar__coin",src:j,alt:"coin"})]})]})]})},_=(c(36),function(){return Object(p.jsx)("main",{className:"hero",children:Object(p.jsx)("h2",{className:"hero__title",children:"Electronics"})})}),v=function(e,t){var c=Object(s.useState)({curIndex:0,nxtIndex:t,pageNumber:1}),n=Object(l.a)(c,2),r=n[0],a=n[1],i=Object(s.useState)(e),o=Object(l.a)(i,2),u=o[0],d=o[1],j=r.curIndex,b=r.nxtIndex,m=r.pageNumber,O=Math.ceil(e.length/t),p=m*t>e.length?e.length:m*t;return Object(s.useEffect)((function(){var t=e.slice(j,b);d(t)}),[e,m,j,b,t]),{filtered:u,amountOfElements:p,pageNumber:m,goNextPage:function(){j+t<e.length&&a({curIndex:j+t,nxtIndex:b+t,pageNumber:m+1})},goPrevPage:function(){j>0&&a({curIndex:j-t,nxtIndex:b-t,pageNumber:m-1})},amountOfPages:O,resetPagination:function(){a({curIndex:0,nxtIndex:t,pageNumber:1})}}},N=c(18),P=c.n(N),w=c(24),y=function(){var e=Object(w.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://coding-challenge-api.aerolab.co/products",{method:"GET",headers:{Authorization:" Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTU2NzA0ODgzOTQ5MDAwMjExZjNiMjIiLCJpYXQiOjE2MzMwNTQ3OTJ9.hTL6w62XaxJGJksvZo1yUnoa7ekSwpvl0CMjAn9p9Y0")}});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=c.p+"static/media/coin.b8bc711d.svg",S=(c(20),c.p+"static/media/buy-white.c0ee23a5.svg"),C=c.p+"static/media/buy-blue.c5c4f01c.svg",E=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("img",{className:"product-item__buy-icon--white product-item__buy-icon",src:S,alt:"buy-white-icon"}),Object(p.jsx)("img",{className:"product-item__buy-icon--blue product-item__buy-icon",src:C,alt:"buy-blue-icon"})]})},k=(c(38),function(){return Object(p.jsxs)("div",{className:"spinner",children:[Object(p.jsx)("div",{className:"rect1"}),Object(p.jsx)("div",{className:"rect2"}),Object(p.jsx)("div",{className:"rect3"}),Object(p.jsx)("div",{className:"rect4"})]})}),J=function(e){var t=e.handleReedem,c=e.isMobileView;return Object(p.jsx)(p.Fragment,{children:c?Object(p.jsx)("button",{onDoubleClick:t,className:"product-item__redeem-btn",children:"Redeem Now"}):Object(p.jsx)("button",{onClick:t,className:"product-item__redeem-btn",children:"Redeem Now"})})},R=function(e){var t=e.product,c=Object(s.useContext)(x),r=c.productsState,a=c.dispatch,i=Object(s.useState)(!1),o=Object(l.a)(i,2),u=o[0],d=o[1],j=Object(s.useState)(!1),b=Object(l.a)(j,2),O=b[0],h=b[1],f=t.name,g=t.category,_=t.cost,v=t.img,N=r.userPoints-_,P=N>=0;Object(s.useEffect)((function(){var e=function(e){window.innerWidth<768?h(!0):h(!1)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);return Object(p.jsxs)("div",{className:"product-item",children:[Object(p.jsxs)("div",{className:"product-item__info",children:[Object(p.jsx)("img",{src:v.url,alt:f}),Object(p.jsxs)("div",{className:"product-item__text",children:[Object(p.jsx)("span",{children:g}),Object(p.jsx)("h4",{children:f})]})]}),P?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(E,{}),Object(p.jsxs)("div",{className:"product-item__redeem-info",children:[Object(p.jsxs)("div",{className:"product-item__redeem-cost",children:[Object(p.jsx)("span",{children:_}),Object(p.jsx)("img",{src:I,alt:"coin-icon"})]}),u?Object(p.jsx)(k,{}):Object(p.jsx)(J,{handleReedem:function(){d(!0),setTimeout((function(){a({type:n.BUY,payload:Object(m.a)(Object(m.a)({},t),{},{date:(new Date).toDateString()})}),d(!1)}),1e3)},isMobileView:O})]})]}):Object(p.jsxs)("div",{className:"product-item__needed-points",children:[Object(p.jsxs)("span",{className:"product-item__needed-points__label",children:["You need ",Math.abs(N)]}),Object(p.jsx)("img",{src:I,alt:"coin-icon"})]})]})},M=(c(39),function(e){var t=e.filtered;return Object(p.jsx)("div",{className:"products__list",children:null===t||void 0===t?void 0:t.map((function(e){return Object(p.jsx)(R,{product:e},e._id)}))})}),A=c.p+"static/media/arrow-left.e6eb9be1.svg",T=c.p+"static/media/arrow-right.3306c112.svg",B=(c(40),function(){var e=Object(s.useRef)(!0),t=Object(s.useState)([]),c=Object(l.a)(t,2),n=c[0],r=c[1],a=Object(s.useState)([]),i=Object(l.a)(a,2),o=i[0],u=i[1],d=v(n,16),j=d.filtered,m=d.amountOfElements,O=d.pageNumber,x=d.goNextPage,h=d.goPrevPage;Object(s.useEffect)((function(){return y().then((function(t){e.current&&(r(t),u(t))})),function(){e.current=!1}}),[n]);return Object(p.jsxs)("div",{className:"products",children:[Object(p.jsxs)("div",{className:"products__handlers",children:[Object(p.jsxs)("div",{className:"products__sort",children:[Object(p.jsxs)("span",{className:"products__amount",children:[m," of ",null===n||void 0===n?void 0:n.length," products"]}),Object(p.jsxs)("div",{className:"products__sort-buttons",children:[Object(p.jsx)("span",{className:"products__sort-buttons-label",children:"Sort by: "}),Object(p.jsxs)("div",{className:"products__sort-buttons-container",children:[Object(p.jsx)("button",{onClick:function(){o.length>0&&r(Object(b.a)(o))},className:"products__most-recent btn",children:"Most Recent"}),Object(p.jsx)("button",{onClick:function(){r(Object(b.a)(function(e){return Object(b.a)(e).sort((function(e,t){return e.cost-t.cost}))}(n)))},className:"products__lowest-price btn",children:"Lowest Price"}),Object(p.jsx)("button",{onClick:function(){r(Object(b.a)(function(e){return Object(b.a)(e).sort((function(e,t){return t.cost-e.cost}))}(n)))},className:"products__highest-price btn",children:"Highest Price"})]})]})]}),Object(p.jsxs)("div",{className:"products__pagination-controls",children:[O>1&&Object(p.jsx)("button",{onClick:h,className:"products__left-arrow",children:Object(p.jsx)("img",{src:A,alt:"left-arrow-icoin"})}),m<n.length&&Object(p.jsx)("button",{onClick:x,className:"products__right-arrow",children:Object(p.jsx)("img",{src:T,alt:"right-arrow-icoin"})})]})]}),Object(p.jsx)(M,{filtered:j}),Object(p.jsxs)("footer",{className:"footer",children:[m," of ",null===n||void 0===n?void 0:n.length," products"]})]})}),U=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_,{}),Object(p.jsx)(B,{})]})},z=function(e){var t=e.redeemProduct,c=t.name,n=t.category,s=t.img,r=t.date,a=t.quantity;return Object(p.jsx)("div",{className:"product-item",children:Object(p.jsxs)("div",{className:"product-item__info",children:[Object(p.jsx)("img",{src:s.url,alt:c}),Object(p.jsxs)("div",{className:"product-item__text",children:[Object(p.jsx)("span",{children:n}),Object(p.jsx)("h4",{children:c}),Object(p.jsxs)("p",{children:["Date : ",r]}),Object(p.jsxs)("p",{children:["Quantity : ",a]})]})]})})},D=(c(41),c.p+"static/media/arrow-left.e6eb9be1.svg"),Y=c.p+"static/media/arrow-right.3306c112.svg",L=function(){var e=Object(s.useContext)(x).productsState,t=v(e.redeemProducts,12),c=t.filtered,n=t.goPrevPage,r=t.goNextPage,a=t.amountOfElements;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"profile-page__controls",children:[Object(p.jsx)("button",{onClick:n,className:"profile-page__button",children:Object(p.jsx)("img",{src:D,alt:"previous-button"})}),Object(p.jsxs)("span",{children:[a," of ",e.redeemProducts.length," Products"]}),Object(p.jsx)("button",{onClick:r,className:"profile-page__button",children:Object(p.jsx)("img",{src:Y,alt:"next-button"})})]}),Object(p.jsx)("div",{className:"profile-page__list",children:c.map((function(e){return Object(p.jsx)(z,{redeemProduct:e},e._id)}))})]})},F=(c(42),function(){return Object(p.jsxs)("div",{className:"profile-page",children:[Object(p.jsxs)("div",{className:"profile-page__bar",children:[Object(p.jsx)(o.b,{className:"profile-page__back-button",to:"/",children:"Back"}),Object(p.jsx)("h3",{className:"profile-page__label",children:"Redeem Products"})]}),Object(p.jsx)(L,{})]})}),Q=function(){return Object(p.jsxs)(o.a,{children:[Object(p.jsx)(g,{}),Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.b,{exact:!0,path:"/profile",component:F}),Object(p.jsx)(u.b,{exact:!0,path:"/",component:U}),Object(p.jsx)(u.a,{to:"/"})]})]})};var q=function(){return Object(p.jsx)(f,{children:Object(p.jsx)(Q,{})})};c(43);i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(q,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.d57d464c.chunk.js.map